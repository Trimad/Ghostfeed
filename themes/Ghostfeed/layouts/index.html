{{ define "main" }}
<article>
    {{/* <h1>{{ .Title }}</h1> */}}
    {{ .Content }}

    <section id="posts">
        {{ range .Site.RegularPages }}
            <article class="post-preview">
                <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
                <p>{{ .Description | default .Summary }}</p>
                {{ $taxonomyPages := slice }}
                {{ with .Params.tags }}
                    {{ $taxonomyPages = $taxonomyPages | append (dict "Title" "Tags" "BaseURL" "/tags/" "Terms" .) }}
                {{ end }}
                {{ with .Params.categories }}
                    {{ $taxonomyPages = $taxonomyPages | append (dict "Title" "Categories" "BaseURL" "/categories/" "Terms" .) }}
                {{ end }}

                {{ if gt (len $taxonomyPages) 0 }}
                    <div class="terms">
                        {{ range $taxonomyPages }}
                            {{ $baseURL := .BaseURL }}
                            <div class="term-group {{ lower .Title }}">
                                <span class="term-title">{{ .Title }}:</span>
                                {{ range .Terms }}
                                    <a class="term-link" href="{{ $.Site.BaseURL | relLangURL }}{{ $baseURL }}{{ . | urlize }}">{{ . }}</a>
                                {{ end }}
                            </div>
                        {{ end }}
                    </div>
                {{ end }}
                <small>
                    Published: {{ .Date.Format "January 2, 2006" }}
                    {{ with .GitInfo }}
                        {{ if ne $.Date .AuthorDate }}
                            | Last Modified: {{ .AuthorDate.Format "January 2, 2006" }}
                        {{ end }}
                    {{ end }}
                </small>
            </article>
            <hr>
        {{ else }}
            <p>No posts yet.</p>
        {{ end }}
    </section>
</article>
{{ end }} 